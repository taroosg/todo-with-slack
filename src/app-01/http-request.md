# http ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å®Ÿè£…

- å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é–¢æ•°ãŒæ¸¡ã›ãŸãŒï¼Œç¾çŠ¶ã§ã¯å…¥åŠ›å€¤ã«æ–‡å­—åˆ—ã‚’è¿½åŠ ã—ã¦å‡ºåŠ›ã™ã‚‹ã ã‘ã®é–¢æ•°ã§ã‚ã‚‹ï¼
- ãã“ã§ï¼ŒæŒ‡å®šã—ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ Google books API ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å‡¦ç†ã«å¤‰æ›´ã™ã‚‹ï¼
- http ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯`axios`ã‚’ä½¿ç”¨ã™ã‚‹ï¼

## axios ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼

```bash
$ npm install axios
```

ã‚¨ãƒ©ãƒ¼ãŒã§ãªã‘ã‚Œã° OKï¼

## ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–¢æ•°ã‚’å®Ÿè£…

`App.jsx` ã® `getDataFromAPI` é–¢æ•°ã‚’ç·¨é›†ã™ã‚‹ï¼

```jsx
// App.jsx

// ğŸ”½ è¿½åŠ 
import axios from "axios";

// ...çœç•¥

// ğŸ”½ getDataFromAPI é–¢æ•°ã®å†…å®¹ã‚’ç·¨é›†
const getDataFromAPI = async (keyword) => {
  const requestUrl = "https://www.googleapis.com/books/v1/volumes?q=intitle:";
  const result = await axios.get(`${requestUrl}${keyword}`);
  return result;
};

// ...çœç•¥
```

â€»ã“ã®è¨˜è¿°ã ã‘ã§ã¯å‹•ãã¾ã›ã‚“ï¼ï¼

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆuseState, useEffectï¼‰

å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ `getDataFromAPI` é–¢æ•°ã‚’å®Ÿè¡Œã—ãŸã„ãŒï¼Œä»¥ä¸‹ 2 ã¤ã®å•é¡ŒãŒã‚ã‚‹ï¼

- å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯é–¢æ•°ã§ã‚ã‚‹ãŸã‚ï¼Œå–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã§ããªã„ï¼
- ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒå†å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ï¼ŒAPI ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒç„¡é™ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ï¼

å‰è€…ã®å•é¡Œã«ã¯ `useState`ï¼Œå¾Œè€…ã®å•é¡Œã«ã¯ `useEffect` ã¨ã„ã†æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§å¯¾å‡¦ã§ãã‚‹ï¼

ï¼ˆ`useState` ã¨ `useEffect` ã¯ React ã®æ¨™æº–ã®æ©Ÿèƒ½ãªã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãªã©ã®ä½œæ¥­ã¯å¿…è¦ãªã„ï¼‰

`Booklist.jsx`ã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«ç·¨é›†ã™ã‚‹ï¼

```jsx
// Booklist.jsx

// ğŸ”½ è¿½åŠ 
import { useState, useEffect } from "react";

export const Booklist = ({ language, getData }) => {
  // ğŸ”½ ã“ã“ã‹ã‚‰è¿½åŠ 
  const [bookData, setBookData] = useState(null);

  useEffect(() => {
    const result = getData?.(language).then((response) =>
      setBookData(response)
    );
  }, [language, getData]);

  // ğŸ”¼ ã“ã“ã¾ã§è¿½åŠ 

  return (
    <>
      <p>this is {JSON.stringify(bookData)} list component</p>
    </>
  );
};
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã™ã‚‹ã¨ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒæ–‡å­—åˆ—ã§è¡¨ç¤ºã•ã‚Œã‚‹ï¼

![ãƒ¡ã‚¤ãƒ³ç”»é¢9](./img/mainview09.png)

## ã€è§£èª¬ã€‘useState

- useState ã¯é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå€¤ï¼ˆä»Šå›ã¯ API ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ï¼

- `const [bookData, setBookData] = useState(null);` ã®

  - `bookData` ãŒãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®å¤‰æ•°åï¼

  - `setBookData` ãŒãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®é–¢æ•°ï¼

  - `useState(null)` ã® `null` ãŒ `bookData` ã®åˆæœŸå€¤ï¼

- `setBookData(æœ€æ–°ã®å€¤)` ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã§ï¼Œ `bookData` ã®å€¤ãŒæœ€æ–°ã®å€¤ã«æ›´æ–°ã•ã‚Œã‚‹ï¼

- `bookData` ã«ä¿å­˜ã—ãŸå†…å®¹ã‚’è¡¨ç¤ºã—ãŸã„ã¨ããªã©ã¯é€šå¸¸ã®å¤‰æ•°ã®ã‚ˆã†ã«æ‰±ãˆã° OKï¼

## ã€è§£èª¬ã€‘useEffect

- é–¢æ•°å¤–ã®å‰¯ä½œç”¨ï¼ˆå¤–éƒ¨ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚„ DOM ã®æ›´æ–°ãªã©ï¼‰ã‚’æ‰±ã†ãŸã‚ã®æ©Ÿèƒ½ï¼

- React ã§ã¯ï¼Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ãŒã‚ã‚‹ã¨å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŸã‚ï¼ŒAPI ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã¨æ¯å›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒç™ºç”Ÿã—ã¦ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨ãªã£ã¦ã—ã¾ã†ï¼

- useEffect ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’åˆ¶é™ã—ï¼Œç‰¹å®šã®å€¤ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã®ã¿å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ï¼

- æ›¸å¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ï¼

```jsx
useEffect(() => {
  å®Ÿè¡Œã—ãŸã„å‡¦ç†
}, [ã“ã“ã«æ›¸ã„ãŸå€¤ï¼ˆä»Šå›ã¯`language`ã¨`getData`ï¼‰ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã®ã¿ï¼Œä¸Šã®{}å†…ãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼ã“ã“ã«å€¤ã‚’æ›¸ãã¨ãã¯é…åˆ—ã§æ›¸ã]);
```

> **ğŸ’¡ Key Point**
>
> `useState` ã¨ `useEffect` ä»¥å¤–ã«ã‚‚ hooks ã«ã¯ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒå­˜åœ¨ã™ã‚‹ï¼
>
> ã¾ãšã¯ã“ã® 2 ã¤ã‚’ä½¿ã†ã“ã¨ã§å¤šãã®å‡¦ç†ã‚’å®Ÿè£…å¯èƒ½ã§ã‚ã‚‹ãŸã‚ï¼Œã¾ãšã¯ã“ã® 2 ã¤ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚ã†ï¼
