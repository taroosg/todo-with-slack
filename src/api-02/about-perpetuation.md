# データの永続化について

## Node.js におけるデータ永続化

データの永続化とは，アプリケーションの状態によらずデータを保持することである．言い換えると，DB などの外部にデータを保存すること．

データの永続化に使用する外部 DB は次のようなものがある．Node.js ではいずれの DB も利用できるが，RDB であれば MySQL か PostgreSQL，NoSQL では MongoDB，Firebase，Redis などがよく用いられる．

## RDB

SQL を用いてデータ管理を行う DB．柔軟な集計や結合ができ，情報も多い．

基本的には同じ SQL を記述すれば同じ動作が実行されるが，それぞれの DB で仕様が異なる部分もあるので使用前は要チェックすべし．

できることは非常に幅広く，データを扱う上でできないことはほぼないと考えて良い．

### 例

- MySQL

- PostgreSQL

- OracleDB

## NoSQL

Not Only SQL．SQL を前提としたデータ構造に縛られない DB．「値」およびそれを取得するための「キー」だけを格納できる Key-Value 型の DB などが代表的だ．

下記の例においてもそれぞれデータ構造が異なるため，プロジェクトの目的に合致した DB を選択する必要がある．

RDB と比較して後発のためにより直感的に扱えるものが多い一方で，データの格納および取得が高度に最適化されているが故に，機能性を最小限にしているものもある．

- MongoDB

- Firebase Firestore Database

- Firebase Realtime Database

- Redis

- DynamoDB

- Neo4j

- Supabase

## 使い分け

ケースバイケース．

アプリケーションが実現したい機能を明確にし，相性が良い方を選択する．

## 今回使用する DB

**今回は環境構築が不要でオンラインにデータを保存できる「Supabase」を使用する．**

GitHub アカウントで使用できる．特徴は以下のとおり．

- オンライン上にデータを保存できる．

- DB の構成がテーブル管理であるため NoSQL の中では RDB に近く，SQL ライクな操作ができる．

  - PostgreSQL が元．

- DB 以外にも Auth，Storage など利用可能．

- 各種言語やフレームワーク用のライブラリが充実しており開発がしやすい（個人の感想）．

ドキュメント

[https://supabase.com/docs](https://supabase.com/docs)

注意点

- 無料プランでは 1 週間で DB が止まる（管理画面から再起動可能）．
